clouds:
    - aws
description: |
    Deploys Karpenter controller and necessary infrastructure for EKS clusters.
    This module installs the Karpenter controller, IAM roles, and sets up interruption handling.
    Use this module once per cluster, then use kubernetes_node_pool/karpenter for creating NodePools.
intentDetails:
  type: kubernetes
  description: Karpenter for automatic node provisioning and scaling in Kubernetes
  displayName: Karpenter
flavor: default
inputs:
    cloud_account:
        description: The AWS Cloud Account for EC2 instance provisioning
        displayName: Cloud Account
        optional: false
        providers:
            - aws
        type: '@facets/aws_cloud_account'
    eks_details:
        description: The EKS cluster where the crds be created
        displayName: EKS Cluster
        optional: false
        type: '@facets/eks'
    kubernetes_details:
        description: The providers to be used
        displayName: Kubernetes Details
        optional: false
        providers:
            - helm
            - kubernetes
            - kubernetes-alpha
        type: '@facets/kubernetes-details'
    network_details:
        default:
            resource_name: default
            resource_type: network
        displayName: Network
        type: '@facets/aws-vpc-details'
intent: karpenter
outputs:
    default:
        title: Karpenter Details
        type: '@facets/karpenter-details'
sample:
    disabled: false
    flavor: default
    kind: karpenter
    spec:
        karpenter_replicas: 1
        karpenter_version: 1.5.0
    version: "1.0"
spec:
    description: Configure Karpenter controller for your EKS cluster
    properties:
        karpenter_replicas:
            default: 1
            description: Number of Karpenter controller replicas for high availability
            maximum: 5
            minimum: 1
            title: Controller Replicas
            type: integer
        karpenter_version:
            default: 1.5.0
            description: Version of Karpenter to deploy (should match your Kubernetes version)
            title: Karpenter Version
            type: string
        tags:
            description: Additional AWS tags to apply to Karpenter resources
            title: Resource Tags
            type: object
            x-ui-yaml-editor: true
    required:
        - karpenter_version
    title: Karpenter Controller Configuration
    type: object
    x-ui-order:
        - karpenter_version
        - karpenter_replicas
        - tags
version: "1.0"
