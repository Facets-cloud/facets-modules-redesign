intent: iam_policy
flavor: aws_iam_policy
version: '1.0'
description: Adds AWS IAM Policy
intentDetails:
  type: Security & Compliance
  description: Create and manage AWS IAM policies for fine-grained access control
  displayName: IAM Policy
  iconUrl: https://raw.githubusercontent.com/Facets-cloud/facets-modules-redesign/main/icons/iam_policy.svg
clouds:
- aws
inputs:
  cloud_account:
    type: '@facets/aws_cloud_account'
    displayName: Cloud Account
    description: The AWS Cloud Account where the IAM Policy will be created
    optional: false
    default:
      resource_type: cloud_account
      resource_name: default
    providers:
    - aws
spec:
  title: AWS IAM Policy
  description: Specification of the aws iam policy resource intent
  type: object
  properties:
    aws_iam_policy:
      title: AWS IAM policy
      type: object
      properties:
        path:
          type: string
          title: IAM Policy Path
          default: "/"
        description:
          type: string
          title: Description
    name:
      type: string
      title: Policy Name
    policy:
      type: object
      title: policy
      description: Enter the policy in YAML format.
      x-ui-yaml-editor: true
      x-ui-placeholder: Enter the policy document in YAML.
  required:
  - name
  - policy
outputs:
  default:
    type: '@facets/iam_policy'
    title: IAM Policy Details
sample:
  kind: iam_policy
  flavor: aws_iam_policy
  version: '1.0'
  disabled: true
  metadata:
    annotations: {}
  spec:
    name: test_aws_iam_policy
    policy:
      Version: '2012-10-17'
      Statement:
      - Sid: ListYourObjects
        Effect: Allow
        Action: s3:ListBucket
        Resource: []
iac:
  validated_files:
  - variables.tf