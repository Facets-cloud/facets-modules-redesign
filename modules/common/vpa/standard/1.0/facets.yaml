clouds:
    - aws
    - azure
    - gcp
    - kubernetes
description: Deploys Vertical Pod Autoscaler (VPA) for automatic resource recommendations and right-sizing
flavor: standard
iac:
    validated_files:
        - variables.tf
inputs:
    kubernetes_details:
        default:
            resource_name: default
            resource_type: kubernetes_cluster
        displayName: Kubernetes Cluster
        optional: false
        providers:
            - kubernetes
            - kubernetes-alpha
            - helm
        type: '@facets/kubernetes-details'
    kubernetes_node_pool_details:
        displayName: Node Pool
        optional: false
        type: '@facets/kubernetes_nodepool'
    prometheus_details:
        default:
            resource_name: default
            resource_type: prometheus
        displayName: Prometheus
        optional: false
        type: '@facets/prometheus'
intent: vpa
outputs:
    default:
        title: VPA Details
        type: '@facets/vpa'
sample:
    disabled: false
    flavor: standard
    kind: vpa
    metadata: {}
    spec:
        admission_controller:
            enabled: false
        create_namespace: true
        deployment:
            atomic: false
            cleanup_on_fail: true
            recreate_pods: false
            timeout: 600
            wait: false
        helm_values: {}
        namespace: vpa-system
        recommender:
            configuration: {}
            enabled: true
            size:
                cpu: 500m
                cpu_limits: 1500m
                memory: 500Mi
                memory_limits: 1500Mi
            storage: prometheus
        updater:
            enabled: false
        version: 2.5.1
    version: "1.0"
spec:
    description: Configuration options for Vertical Pod Autoscaler deployment
    properties:
        admission_controller:
            description: Configuration for VPA admission controller component
            properties:
                enabled:
                    default: false
                    description: Enable the VPA admission controller component
                    title: Enable Admission Controller
                    type: boolean
            required:
                - enabled
            title: Admission Controller Configuration
            type: object
        create_namespace:
            default: true
            description: Whether to create the namespace if it doesn't exist
            title: Create Namespace
            type: boolean
        deployment:
            description: Helm deployment configuration options
            properties:
                atomic:
                    default: false
                    description: If set, installation process purges chart on fail
                    title: Atomic Installation
                    type: boolean
                cleanup_on_fail:
                    default: true
                    description: Delete resources if installation fails
                    title: Cleanup on Fail
                    type: boolean
                recreate_pods:
                    default: false
                    description: Perform pods restart during upgrade/rollback
                    title: Recreate Pods
                    type: boolean
                timeout:
                    default: 600
                    description: Time in seconds to wait for any individual Kubernetes operation
                    maximum: 3600
                    minimum: 60
                    title: Timeout (seconds)
                    type: integer
                wait:
                    default: false
                    description: Wait for all resources to be ready before marking release as successful
                    title: Wait for Ready
                    type: boolean
            required:
                - cleanup_on_fail
                - wait
                - atomic
                - timeout
                - recreate_pods
            title: Deployment Configuration
            type: object
            x-ui-toggle: true
        helm_values:
            description: Additional Helm values to override defaults
            title: Custom Helm Values
            type: object
            x-ui-placeholder: Enter custom Helm values in YAML format
            x-ui-yaml-editor: true
        namespace:
            default: vpa-system
            description: Kubernetes namespace for VPA deployment
            title: Namespace
            type: string
        recommender:
            description: Configuration for VPA recommender component
            properties:
                configuration:
                    description: Additional configuration options for the recommender
                    title: Additional Configuration
                    type: object
                    x-ui-placeholder: Enter additional recommender arguments in YAML format
                    x-ui-yaml-editor: true
                enabled:
                    default: true
                    description: Enable the VPA recommender component
                    title: Enable Recommender
                    type: boolean
                size:
                    description: CPU and memory resource requirements for the recommender
                    properties:
                        cpu:
                            default: 500m
                            description: CPU resource request for recommender pod
                            title: CPU Request
                            type: string
                        cpu_limits:
                            default: 1500m
                            description: CPU resource limit for recommender pod
                            title: CPU Limit
                            type: string
                        memory:
                            default: 500Mi
                            description: Memory resource request for recommender pod
                            title: Memory Request
                            type: string
                        memory_limits:
                            default: 1500Mi
                            description: Memory resource limit for recommender pod
                            title: Memory Limit
                            type: string
                    required:
                        - cpu
                        - memory
                        - cpu_limits
                        - memory_limits
                    title: Resource Requirements
                    type: object
                storage:
                    default: prometheus
                    description: Storage backend for historical metrics
                    enum:
                        - prometheus
                        - memory
                    title: Storage Backend
                    type: string
            required:
                - enabled
            title: Recommender Configuration
            type: object
        updater:
            description: Configuration for VPA updater component
            properties:
                enabled:
                    default: false
                    description: Enable the VPA updater component
                    title: Enable Updater
                    type: boolean
            required:
                - enabled
            title: Updater Configuration
            type: object
        version:
            default: 2.5.1
            description: Version of the VPA Helm chart to deploy
            title: VPA Chart Version
            type: string
    required:
        - version
        - namespace
        - create_namespace
        - deployment
        - recommender
        - updater
        - admission_controller
    title: VPA Configuration
    type: object
version: "1.0"
