intent: facets_k8s_callback
flavor: default
version: '1.0'
description: Creates ServiceAccount with admin role and registers K8s credentials with
  Facets control plane
clouds:
- kubernetes
intentDetails:
  type: Kubernetes Resources
  description: Registers Kubernetes cluster credentials with Facets control plane
  displayName: K8s Callback
  iconUrl: https://raw.githubusercontent.com/Facets-cloud/facets-modules-redesign/main/icons/facets_k8s_callback.svg
inputs:
  kubernetes_details:
    type: '@facets/ovh-kubernetes'
    optional: false
    displayName: Kubernetes Cluster
    description: Kubernetes cluster configuration
    providers:
    - kubernetes
spec:
  title: Facets K8s Callback Configuration
  description: Configure K8s credential registration
  type: object
  properties:
    service_account_name:
      type: string
      title: Service Account Name
      description: Name of the service account to create
      default: facets-admin
      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
sample:
  kind: facets_k8s_callback
  flavor: default
  version: '1.0'
  disabled: false
  spec:
    service_account_name: facets-admin
iac:
  validated_files:
  - main.tf
  - variables.tf
  - versions.tf
