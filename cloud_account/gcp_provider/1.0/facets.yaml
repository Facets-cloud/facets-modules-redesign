intent: cloud_account
flavor: gcp_provider
version: '1.0'
description: Module to configure and provision resources within a cloud account
clouds:
- gcp
spec:
  description: Module to configure and provision resources within a cloud account
    (AWS, GCP, Azure)
  properties:
    region:
      type: string
      title: GCP Region
      description: GCP region where resources will be created
      x-ui-overrides-only: true
      x-ui-api-source:
        endpoint: /cc-ui/v1/dropdown/gcp/regions-v2
        method: GET
        labelKey: region
        valueKey: region
        path: regions
    cloud_account:
      description: Select the cloud account to use (must be previously linked)
      title: Cloud Account
      type: string
      x-ui-typeable: true
      x-ui-overrides-only: true
      x-ui-api-source:
        endpoint: /cc-ui/v1/accounts/
        method: GET
        labelKey: name
        valueKey: id
        filterConditions:
        - field: accountType
          value: CLOUD
        - field: provider
          value: GCP
        params:
          includeContent: false
  required:
  - cloud_account
  - region
  title: Cloud Account Manager
  type: object
  x-ui-order:
  - cloud_account
  - region
outputs:
  default:
    type: '@facets/gcp_cloud_account'
    providers:
      google:
        source: hashicorp/google
        version: '>= 6.23.0'
        attributes:
          project: attributes.project
          credentials: attributes.credentials
sample:
  version: '1.0'
  flavor: gcp_provider
  kind: cloud_account
  disabled: false
  spec:
    cloud_account: gcp-prod-account
    region: us-central1
iac:
  validated_files:
  - variables.tf
