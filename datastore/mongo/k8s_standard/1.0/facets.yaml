intent: mongo
flavor: k8s_standard
version: '1.0'
clouds:
- kubernetes
description: MongoDB replica set deployed using MongoDB Kubernetes Operator
spec:
  title: MongoDB Kubernetes Operator
  description: MongoDB replica set deployed using MongoDB Kubernetes Operator
  type: object
  properties:
    mongodb_version:
      type: string
      title: MongoDB Version
      description: MongoDB version to deploy
      default: 8.0.15
      enum:
      - 8.0.15
      - 7.0.15
      - 6.0.19
      - 5.0.30
    replica_count:
      type: number
      title: Replica Count
      description: Number of MongoDB replica set members
      default: 3
      minimum: 1
      maximum: 7
    resources:
      type: object
      title: Resources
      description: CPU and memory resources for MongoDB pods
      properties:
        cpu:
          type: string
          title: CPU
          description: CPU request and limit (e.g., 1000m, 2)
          default: '1'
        memory:
          type: string
          title: Memory
          description: Memory request and limit (e.g., 2Gi, 4Gi)
          default: 2Gi
          pattern: ^[0-9]+[GM]i$
    storage_size:
      type: string
      title: Storage Size
      description: Persistent volume size per replica
      default: 10Gi
      pattern: ^[0-9]+[GM]i$
    max_connections:
      type: number
      title: Max Connections
      description: Maximum number of simultaneous client connections
      default: 65536
      minimum: 100
      maximum: 1000000
  required:
  - mongodb_version
  - replica_count
inputs:
  kubernetes_cluster:
    type: '@facets/kubernetes-details'
    optional: false
    displayName: Kubernetes Cluster
    description: Target Kubernetes cluster for MongoDB deployment
    providers:
    - kubernetes
    - helm
  node_pool:
    type: '@facets/kubernetes_nodepool'
    optional: false
    displayName: Node Pool
    description: Node pool for MongoDB pods
  mongodb_operator:
    type: '@facets/mongodb-operator'
    optional: false
    displayName: MongoDB Kubernetes Operator
    description: MongoDB Kubernetes Operator Helm release
outputs:
  default:
    type: '@facets/mongo_k8s'
    title: MongoDB Replica Set
iac:
  validated_files:
  - main.tf
  - variables.tf
  - locals.tf
  - outputs.tf
sample:
  kind: mongo
  flavor: k8s_standard
  version: '1.0'
  disabled: false
  spec:
    mongodb_version: 8.0.15
    replica_count: 3
    resources:
      cpu: '1'
      memory: 2Gi
    storage_size: 10Gi
    max_connections: 65536
