intent: mongo
flavor: k8s_standard
version: '1.0'
clouds:
- kubernetes
description: MongoDB replica set deployed using MongoDB Kubernetes Operator
spec:
  title: MongoDB Kubernetes Operator
  description: MongoDB replica set deployed using MongoDB Kubernetes Operator
  type: object
  properties:
    database_name:
      type: string
      title: Database Name
      description: Name of the default database to create
      default: admin
    mongodb_version:
      type: string
      title: MongoDB Version
      description: MongoDB version to deploy
      default: 7.0.15
      enum:
      - 7.0.15
      - 6.0.13
      - 5.0.24
    replica_count:
      type: number
      title: Replica Count
      description: Number of MongoDB replica set members
      default: 3
      minimum: 1
      maximum: 7
    admin_username:
      type: string
      title: Admin Username
      description: Username for MongoDB admin user
      default: admin
    resources:
      type: object
      title: Resources
      description: CPU and memory resources for MongoDB pods
      properties:
        cpu:
          type: string
          title: CPU
          description: CPU request and limit (e.g., 1000m, 2)
          default: '1'
        memory:
          type: string
          title: Memory
          description: Memory request and limit (e.g., 2Gi, 4Gi)
          default: 2Gi
          pattern: ^[0-9]+[GM]i$
    storage_size:
      type: string
      title: Storage Size
      description: Persistent volume size per replica
      default: 10Gi
      pattern: ^[0-9]+[GM]i$
  required:
  - database_name
  - mongodb_version
  - replica_count
  - admin_username
inputs:
  kubernetes_cluster:
    type: '@facets/eks'
    optional: false
    displayName: Kubernetes Cluster
    description: Target Kubernetes cluster for MongoDB deployment
    providers:
    - kubernetes
    - helm
  node_pool:
    type: '@facets/kubernetes_nodepool'
    optional: false
    displayName: Node Pool
    description: Node pool for MongoDB pods
  mongodb_operator:
    type: '@facets/helm'
    optional: false
    displayName: MongoDB Kubernetes Operator
    description: MongoDB Kubernetes Operator Helm release
outputs:
  default:
    type: '@facets/mongors'
    title: MongoDB Replica Set
iac:
  validated_files:
  - main.tf
  - variables.tf
  - locals.tf
sample:
  kind: mongo
  flavor: mongodb-operator
  version: '1.0'
  disabled: false
  spec:
    database_name: admin
    mongodb_version: 7.0.15
    replica_count: 3
    admin_username: admin
